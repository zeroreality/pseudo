﻿<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Date prototype tests</title>
	<!-- jasmine -->
	<link rel="stylesheet" href="../jasmine-3.5.0/jasmine.css">
	<script src="../jasmine-3.5.0/jasmine.js"></script>
	<script src="../jasmine-3.5.0/jasmine-html.js"></script>
	<script src="../jasmine-3.5.0/boot.js"></script>
</head>
<body>
	<script>var ns = {};</script>
	<script src="../../src/_include.js"></script>
	<script src="../../src/objects/Date.js"></script>
	<!-- support -->
	<script type="text/javascript">
		var epoch = new Date(0),
			midnight = Date.midnight();
	</script>
	<!-- test -->
	<script type="text/javascript" defer="defer">
		describe("context", function() {
			var base = new Date(2020, 0, 1),
				milli = new Date(base).addMilliseconds(1),
				second = new Date(base).addSeconds(1),
				minute = new Date(base).addMinutes(1),
				hour = new Date(base).addHours(1),
				day = new Date(base).addDate(1),
				week = new Date(base).addDate(7),
				month = new Date(base).addMonth(1),
				year = new Date(base).addYear(1);

			it("same date", function() {
				expect(base.context(base)).toEqual([]);
				expect(midnight.context(midnight)).toEqual([]);
				expect(epoch.context(epoch)).toEqual([]);
			});
			/*
			it("milli: future to past", function() {
				var compare = milli.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("fff");
			});
			it("milli: past to future", function() {
				var compare = base.context(milli, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("fff");
			});
			*/
			it("second: future to past", function() {
				var compare = second.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("ss");
			});
			it("second: past to future", function() {
				var compare = base.context(second, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("ss");
			});
			it("minute: future to past", function() {
				var compare = minute.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("mm");
			});
			it("minute: past to future", function() {
				var compare = base.context(minute, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("mm");
			});
			it("hour: future to past", function() {
				var compare = hour.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("hh");
			});
			it("hour: past to future", function() {
				var compare = base.context(hour, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("hh");
			});
			it("day: future to past", function() {
				var compare = day.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("dd");
			});
			it("day: past to future", function() {
				var compare = base.context(day, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("dd");
			});
			it("week: future to past", function() {
				var compare = week.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("ww");
			});
			it("week: past to future", function() {
				var compare = base.context(week, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("ww");
			});
			it("month: future to past", function() {
				var compare = month.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("MM");
			});
			it("month: past to future", function() {
				var compare = base.context(month, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("MM");
			});
			it("year: future to past", function() {
				var compare = year.context(base, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(-1);
				expect(compare[0].type).toBe("yyyy");
			});
			it("year: past to future", function() {
				var compare = base.context(year, 9);
				expect(compare.length).toBe(1);
				expect(compare[0].value).toBe(1);
				expect(compare[0].type).toBe("yyyy");
			});
		});
	</script>
</body>
</html>